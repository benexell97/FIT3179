{
   "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
   "title": "Suicide Rates",
   "width": 800,
   "height": 600,
   "data": {
     "url": "https://raw.githubusercontent.com/benexell97/FIT3179/gh-pages/js/worldmap.topojson",
     "format": {
       "type": "topojson",
       "feature": "custom"
     }
   },
   "transform": [
     {
       "lookup": "properties.name",
       "from": {
         "data": {
             "url": "https://raw.githubusercontent.com/benexell97/FIT3179/gh-pages/data/suicide_master_dataset.csv"
           },
           "key": "Country",
           "fields": ["SuicidesRate","Population"]
         }
     },
     {
       "calculate":"datum.SuicidesRate","as": "Suicide Rate"
     },
     {
       "calculate": "datum.Population", "as": "Population"
     }
   ],
   "projection": {
     "type": "equalearth"
   },
   "mark": {
     "type": "geoshape"
   },
   "encoding": {
     "color": {
       "field": "Suicide Rate",
       "type": "quantitative",
       "scale": {"type": "log"}
     },
     "tooltip": [
       {"field": "properties.name", "type": "nominal", "title": "Country"},
       {"field": "Suicide Rate", "type": "quantitative"},
       {"field": "Population", "type": "quantitative"}
     ]
   }
}
